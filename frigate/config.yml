mqtt:
  enabled: false   # Enable if you use MQTT broker (e.g., Mosquitto)

ffmpeg:
  # Hardware-accelerated video decoding via Intel N5105 iGPU (VAAPI)
  # Offloads H.264/H.265 decoding from CPU to GPU — significant CPU reduction
  hwaccel_args: preset-vaapi

cameras:
  kid_room:
    ffmpeg:
      inputs:
        # High-res stream for recording (Channel 101 = main stream)
        - path: rtsp://<USERNAME>:<PASSWORD>@<CAMERA_IP>:554/Streaming/Channels/101
          roles:
            - record
        # Low-res stream for detection (Channel 102 = sub stream, saves CPU)
        - path: rtsp://<USERNAME>:<PASSWORD>@<CAMERA_IP>:554/Streaming/Channels/102
          roles:
            - detect
    detect:
      enabled: true
      width: 640   # Reduced from 1280 — sufficient for detection, less CPU
      height: 360  # Reduced from 720
      fps: 5

record:
  enabled: true
  retain:
    days: 30          # Continuous recording retained for 30 days
    mode: all         # Record all footage regardless of events
  alerts:
    pre_capture: 10   # Include 10s before alert event
    post_capture: 30  # Include 30s after alert event
    retain:
      days: 30
  detections:
    pre_capture: 5    # Include 5s before detection event
    post_capture: 15  # Include 15s after detection event
    retain:
      days: 30

detectors:
  # Intel OpenVINO — uses N5105 integrated GPU (iGPU) for inference
  # Tested result: inference 13ms (vs 59ms CPU), detector CPU 0.6% (vs 85%)
  # NOTE: device must be GPU, not AUTO — AUTO triggers AVX-512 which N5105 lacks
  ov:
    type: openvino
    device: GPU

model:
  path: /openvino-model/ssdlite_mobilenet_v2.xml
  width: 300
  height: 300
  input_tensor: nhwc
  input_pixel_format: bgr
  labelmap_path: /openvino-model/coco_91cl_bkgr.txt

objects:
  track:
    - person
    - cat
    - dog

# Frigate version this config was tested on
version: 0.16-0
