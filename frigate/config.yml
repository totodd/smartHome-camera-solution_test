mqtt:
  enabled: true
  host: 192.168.2.61
  port: 1883

cameras:
  # 海康威视（儿童房）：双码流分离，主流录像 + 子流检测
  kid_room:
    ffmpeg:
      inputs:
        - path: rtsp://<HIKVISION_USER>:<HIKVISION_PASSWORD>@192.168.2.28:554/Streaming/Channels/101
          roles:
            - record
        - path: rtsp://<HIKVISION_USER>:<HIKVISION_PASSWORD>@192.168.2.28:554/Streaming/Channels/102
          roles:
            - detect
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5

  # 小米摄像头（客厅）：单流共用录像+检测（miloco 不支持子流）
  living_room:
    ffmpeg:
      inputs:
        - path: rtsp://192.168.2.61:8556/xiaomi_living_room
          roles:
            - record
            - detect
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5

  # 小米摄像头（儿童房）：单流共用录像+检测
  kid_room_xiaomi:
    ffmpeg:
      inputs:
        - path: rtsp://192.168.2.61:8556/xiaomi_kid_room
          roles:
            - record
            - detect
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5

record:
  enabled: true
  retain:
    days: 30          # 连续录像保留30天（全时段）
    mode: all
  alerts:
    pre_capture: 10   # 警报事件前10秒
    post_capture: 30  # 警报事件后30秒
    retain:
      days: 30
  detections:
    pre_capture: 5    # 检测事件前5秒
    post_capture: 15  # 检测事件后15秒
    retain:
      days: 30

detectors:
  # OpenVINO：使用 Intel N5105 iGPU 推理
  # 必须指定 device: GPU，不能用 AUTO（N5105 不支持 AVX-512）
  ov:
    type: openvino
    device: GPU

model:
  path: /openvino-model/ssdlite_mobilenet_v2.xml
  width: 300
  height: 300
  input_tensor: nhwc
  input_pixel_format: bgr
  labelmap_path: /openvino-model/coco_91cl_bkgr.txt

objects:
  track:
    - person
    - cat
    - dog

version: 0.16-0
